
Процедура ЗаполнитьСписокДоступныхСтатусов(Список, Ссылка) Экспорт	
	
	мРолиПользователя = абс_БизнесПроцессы.ПолучитьСписокДоступныхРолейПользователя(глЗначениеПеременной("глТекущийПользователь"));
	
	Список.Очистить();
	Если НЕ ЗначениеЗаполнено(Ссылка) Тогда
		Список.Добавить(Перечисления.абс_СтатусыПервичныхДокументов.Подготовка);
		Возврат;
	КонецЕсли;
	
	Если НЕ ЗначениеЗаполнено(Ссылка.Статус) Тогда
		Список.Добавить(Перечисления.абс_СтатусыПервичныхДокументов.Подготовка);
		Возврат;
    Иначе
		Список.Добавить(Ссылка.Статус);
	КонецЕсли;
	
	Если Ссылка.Статус = Перечисления.абс_СтатусыПервичныхДокументов.Подготовка Тогда
		Список.Добавить(Перечисления.абс_СтатусыПервичныхДокументов.СогласованиеОФК);
		Список.Добавить(Перечисления.абс_СтатусыПервичныхДокументов.Отмена);
	ИначеЕсли Ссылка.Статус = Перечисления.абс_СтатусыПервичныхДокументов.СогласованиеОФК Тогда
		Если Не мРолиПользователя.Найти(Справочники.РолиИсполнителей.СогласованиеДЭФ) = Неопределено Или
			 Не мРолиПользователя.Найти(Справочники.РолиИсполнителей.СуперПользователь) = Неопределено Тогда
			Список.Добавить(Перечисления.абс_СтатусыПервичныхДокументов.Согласован);
			Список.Добавить(Перечисления.абс_СтатусыПервичныхДокументов.Отказ);
		КонецЕсли;
	ИначеЕсли Ссылка.Статус = Перечисления.абс_СтатусыПервичныхДокументов.Отказ Тогда
		Список.Добавить(Перечисления.абс_СтатусыПервичныхДокументов.Отмена);
		Список.Добавить(Перечисления.абс_СтатусыПервичныхДокументов.Подготовка);
	ИначеЕсли Ссылка.Статус = Перечисления.абс_СтатусыПервичныхДокументов.Отмена Тогда
		Список.Добавить(Перечисления.абс_СтатусыПервичныхДокументов.Подготовка);		
	КонецЕсли;	
	
	Возврат;
	
КонецПроцедуры

Функция ЗаполнитьСоответствиеБюджетныхАналитик(Организация) Экспорт
	
	Запрос = Новый Запрос;
	Запрос.Текст =
		"ВЫБРАТЬ РАЗРЕШЕННЫЕ
		|	абс_СоответствиеНоменклатурыБюджетнымАналитикам.Номенклатура,
		|	абс_СоответствиеНоменклатурыБюджетнымАналитикам.абс_ТипКонтрагента,
		|	абс_СоответствиеНоменклатурыБюджетнымАналитикам.Организация,
		|	абс_СоответствиеНоменклатурыБюджетнымАналитикам.СтатьяОборотов,
		|	абс_СоответствиеНоменклатурыБюджетнымАналитикам.ЦФО,
		|	абс_СоответствиеНоменклатурыБюджетнымАналитикам.абс_ЦФУ КАК ЦФУ,
		|	абс_СоответствиеНоменклатурыБюджетнымАналитикам.НоменклатурнаяГруппа
		|ИЗ
		|	РегистрСведений.абс_СоответствиеНоменклатурыБюджетнымАналитикам КАК абс_СоответствиеНоменклатурыБюджетнымАналитикам
		|ГДЕ
		|	абс_СоответствиеНоменклатурыБюджетнымАналитикам.Организация = &Организация";
	Запрос.УстановитьПараметр("Организация", Организация);
	
	Возврат Запрос.Выполнить().Выгрузить();
	
КонецФункции

Функция ЗаполнитьСоответствиеБиллинговыхУслуг(Организация) Экспорт
	
	Запрос = Новый Запрос;
	Запрос.Текст =
		"ВЫБРАТЬ РАЗРЕШЕННЫЕ
		|	абс_СоответствиеБиллинговыхУслугНоменклатуре.Организация,
		|	абс_СоответствиеБиллинговыхУслугНоменклатуре.ТипБиллинга,
		|	абс_СоответствиеБиллинговыхУслугНоменклатуре.НаименованиеУслуги,
		|	абс_СоответствиеБиллинговыхУслугНоменклатуре.КодУслугиБиллинга,
		|	абс_СоответствиеБиллинговыхУслугНоменклатуре.Номенклатура,
		|	абс_СоответствиеБиллинговыхУслугНоменклатуре.этоМГМН
		|ИЗ
		|	РегистрСведений.абс_СоответствиеБиллинговыхУслугНоменклатуре КАК абс_СоответствиеБиллинговыхУслугНоменклатуре
		|ГДЕ
		|	абс_СоответствиеБиллинговыхУслугНоменклатуре.Организация = &Организация";
	Запрос.УстановитьПараметр("Организация", Организация);
	
	Возврат Запрос.Выполнить().Выгрузить();
	
КонецФункции