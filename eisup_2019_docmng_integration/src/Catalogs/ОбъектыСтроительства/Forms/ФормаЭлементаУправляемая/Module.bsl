
&НаКлиенте
Процедура абс_АдресМестонахожденияНачалоВыбора(Элемент, ДанныеВыбора, СтандартнаяОбработка)
	
	ФормаАдреса = Обработки.РедактированиеКонтактнойИнформации.ПолучитьФорму("ФормаЗаписиАдреса", Элемент);
	ФормаАдреса.НачальноеЗначениеВыбора = РегламентированнаяОтчетность.РазложитьАдрес(Объект.абс_АдресМестонахождения);
	Если ФормаАдреса.НачальноеЗначениеВыбора <> Неопределено Тогда
		ФормаАдреса.НачальноеЗначениеВыбора.Вставить("НазваниеРегиона", ФормаАдреса.НачальноеЗначениеВыбора.Регион);
		ФормаАдреса.НачальноеЗначениеВыбора.Регион = ПоРегионуОпределитьКодРегиона(ФормаАдреса.НачальноеЗначениеВыбора.Регион);
	КонецЕсли;

	Если ФормаАдреса.ОткрытьМодально() Тогда
		АдресМестонахождения = СокрЛП(ФормаАдреса.КодСтраны) + "," 
				  + СокрЛП(ФормаАдреса.Поле1) + ","
				  + СокрЛП(ФормаАдреса.Поле2) + ","
				  + СокрЛП(ФормаАдреса.Поле3) + ","
				  + СокрЛП(ФормаАдреса.Поле4) + ","
				  + СокрЛП(ФормаАдреса.Поле5) + ","
				  + СокрЛП(ФормаАдреса.Поле6) + ","
				  + СокрЛП(ФормаАдреса.Поле7) + ","
				  + СокрЛП(ФормаАдреса.Поле8) + ","
				  + СокрЛП(ФормаАдреса.Поле9);
		Объект.абс_АдресМестонахождения = АдресМестонахождения;
	КонецЕсли;
	
КонецПроцедуры

&НаСервереБезКонтекста
Функция ПоРегионуОпределитьКодРегиона(Регион)

	Если ПустаяСтрока(Регион) Тогда
		Возврат Неопределено;
	КонецЕсли;
	
	НайденныйКод = РегламентированнаяОтчетность.КодРегионаПоНазванию(Регион);
	Если Не ПустаяСтрока(НайденныйКод) Тогда
		КодРегиона = НайденныйКод;
	КонецЕсли;
	
	Возврат КодРегиона

КонецФункции

&НаКлиенте
Процедура ПослеЗаписи(ПараметрыЗаписи)
	
	Оповестить("ЗаписьОсновногоСредства", Объект.Ссылка);
	
КонецПроцедуры

&НаСервере
Процедура ОбработкаПроверкиЗаполненияНаСервере(Отказ, ПроверяемыеРеквизиты)
	
	Если Объект.Ссылка.Пустая() И Не ЗначениеЗаполнено(Объект.ttk_ТЭО) Тогда
		ПроверяемыеРеквизиты.Добавить("Объект.ttk_ТЭО");
		Сообщение = Новый СообщениеПользователю();
	    Сообщение.Текст = "Не указано технико-экономическое обоснование (ТЭО)!";
    	Сообщение.Поле = "ttk_ТЭО";
    	Сообщение.Сообщить();
        Отказ = Истина;
		Возврат;
	КонецЕсли;
	
КонецПроцедуры
